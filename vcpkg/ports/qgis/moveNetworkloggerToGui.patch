From 7c0926b86dd45630650416c33f124da98fd41ecc Mon Sep 17 00:00:00 2001
From: Damiano Lombardi <damiano@opengis.ch>
Date: Mon, 15 Sep 2025 21:02:05 +0200
Subject: [PATCH 1/3] Move networklogger to gui

---
 src/app/CMakeLists.txt                        |  6 ---
 .../querylogger/qgsappquerylogger.cpp         | 10 ++---
 .../qgsdatabasequeryloggernode.cpp            |  8 ++--
 .../querylogger/qgsqueryloggerpanelwidget.cpp |  4 +-
 src/app/qgisapp.cpp                           |  4 +-
 src/gui/CMakeLists.txt                        | 11 +++++
 .../networklogger/qgsnetworklogger.cpp        |  2 +-
 .../devtools/networklogger/qgsnetworklogger.h | 12 ++++--
 .../networklogger/qgsnetworkloggernode.cpp    |  4 +-
 .../networklogger/qgsnetworkloggernode.h      | 41 ++++++++++---------
 .../qgsnetworkloggerpanelwidget.cpp           |  0
 .../qgsnetworkloggerpanelwidget.h             | 11 +++--
 .../qgsnetworkloggerwidgetfactory.cpp         |  0
 .../qgsnetworkloggerwidgetfactory.h           | 20 ++++++++-
 .../devtools/qgsdevtoolsmodelnode.cpp         |  0
 .../devtools/qgsdevtoolsmodelnode.h           | 20 +++++----
 16 files changed, 96 insertions(+), 57 deletions(-)
 rename src/{app => gui}/devtools/networklogger/qgsnetworklogger.cpp (98%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworklogger.h (96%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggernode.cpp (99%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggernode.h (91%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggerpanelwidget.cpp (100%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggerpanelwidget.h (91%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp (100%)
 rename src/{app => gui}/devtools/networklogger/qgsnetworkloggerwidgetfactory.h (71%)
 rename src/{app => gui}/devtools/qgsdevtoolsmodelnode.cpp (100%)
 rename src/{app => gui}/devtools/qgsdevtoolsmodelnode.h (93%)

diff --git a/src/app/CMakeLists.txt b/src/app/CMakeLists.txt
index be5940738ce..95602d63ed3 100644
--- a/src/app/CMakeLists.txt
+++ b/src/app/CMakeLists.txt
@@ -168,11 +168,6 @@ set(QGIS_APP_SRCS
   browser/qgsinbuiltdataitemproviders.cpp
 
   devtools/qgsappdevtoolutils.cpp
-  devtools/qgsdevtoolsmodelnode.cpp
-  devtools/networklogger/qgsnetworklogger.cpp
-  devtools/networklogger/qgsnetworkloggernode.cpp
-  devtools/networklogger/qgsnetworkloggerpanelwidget.cpp
-  devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp
   devtools/profiler/qgsprofilerpanelwidget.cpp
   devtools/profiler/qgsprofilerwidgetfactory.cpp
   devtools/documentation/qgsdocumentationpanelwidget.cpp
@@ -507,7 +502,6 @@ target_include_directories(qgis_app PUBLIC
   ${CMAKE_SOURCE_DIR}/src/app
   ${CMAKE_SOURCE_DIR}/src/app/decorations
   ${CMAKE_SOURCE_DIR}/src/app/devtools
-  ${CMAKE_SOURCE_DIR}/src/app/devtools/networklogger
   ${CMAKE_SOURCE_DIR}/src/app/georeferencer
   ${CMAKE_SOURCE_DIR}/src/app/labeling
   ${CMAKE_SOURCE_DIR}/src/app/layout
diff --git a/src/app/devtools/querylogger/qgsappquerylogger.cpp b/src/app/devtools/querylogger/qgsappquerylogger.cpp
index a8dad382b01..04ac8b77cad 100644
--- a/src/app/devtools/querylogger/qgsappquerylogger.cpp
+++ b/src/app/devtools/querylogger/qgsappquerylogger.cpp
@@ -141,7 +141,7 @@ void QgsAppQueryLogger::removeRequestRows( const QList<int> &rows )
 
   for ( int row : std::as_const( res ) )
   {
-    int popId = data( index( row, 0, QModelIndex() ), QgsDevToolsModelNode::RoleId ).toInt();
+    int popId = data( index( row, 0, QModelIndex() ), static_cast<int>( QgsDevToolsModelNode::Roles::RoleId ) ).toInt();
     mQueryGroups.remove( popId );
 
     beginRemoveRows( QModelIndex(), row, row );
@@ -217,11 +217,11 @@ QVariant QgsAppQueryLogger::data( const QModelIndex &index, int role ) const
       switch ( role )
       {
         case Qt::DisplayRole:
-        case QgsDevToolsModelNode::RoleElapsedTime:
-        case QgsDevToolsModelNode::RoleSort:
-          return node->data( QgsDevToolsModelNode::RoleElapsedTime );
+        case static_cast<int>( QgsDevToolsModelNode::Roles::RoleElapsedTime ):
+        case static_cast<int>( QgsDevToolsModelNode::Roles::RoleSort ):
+          return node->data( static_cast<int>( QgsDevToolsModelNode::Roles::RoleElapsedTime ) );
 
-        case QgsDevToolsModelNode::RoleMaximumTime:
+        case static_cast<int>( QgsDevToolsModelNode::Roles::RoleMaximumTime ):
           return mMaxCost;
 
         default:
diff --git a/src/app/devtools/querylogger/qgsdatabasequeryloggernode.cpp b/src/app/devtools/querylogger/qgsdatabasequeryloggernode.cpp
index ce40b61e4a6..5e045d17151 100644
--- a/src/app/devtools/querylogger/qgsdatabasequeryloggernode.cpp
+++ b/src/app/devtools/querylogger/qgsdatabasequeryloggernode.cpp
@@ -88,7 +88,7 @@ QVariant QgsDatabaseQueryLoggerQueryGroup::data( int role ) const
     case Qt::DisplayRole:
       return QStringLiteral( "%1 %2" ).arg( QString::number( mQueryId ), mSql );
 
-    case QgsDevToolsModelNode::RoleSort:
+    case static_cast<int>( QgsDevToolsModelNode::Roles::RoleSort ):
       return mQueryId;
 
     case Qt::ToolTipRole:
@@ -118,13 +118,13 @@ QVariant QgsDatabaseQueryLoggerQueryGroup::data( int role ) const
 #endif
     }
 
-    case RoleStatus:
+    case static_cast<int>( Roles::RoleStatus ):
       return static_cast<int>( mStatus );
 
-    case RoleId:
+    case static_cast<int>( Roles::RoleId ):
       return mQueryId;
 
-    case RoleElapsedTime:
+    case static_cast<int>( Roles::RoleElapsedTime ):
       return mElapsed;
 
     case Qt::ForegroundRole:
diff --git a/src/app/devtools/querylogger/qgsqueryloggerpanelwidget.cpp b/src/app/devtools/querylogger/qgsqueryloggerpanelwidget.cpp
index be1ee082424..77a365675c2 100644
--- a/src/app/devtools/querylogger/qgsqueryloggerpanelwidget.cpp
+++ b/src/app/devtools/querylogger/qgsqueryloggerpanelwidget.cpp
@@ -48,7 +48,7 @@ QgsDatabaseQueryLoggerTreeView::QgsDatabaseQueryLoggerTreeView( QgsAppQueryLogge
   setFont( QFontDatabase::systemFont( QFontDatabase::FixedFont ) );
 
   mProxyModel = new QgsDatabaseQueryLoggerProxyModel( mLogger, this );
-  mProxyModel->setSortRole( QgsDevToolsModelNode::RoleSort );
+  mProxyModel->setSortRole( static_cast<int>( QgsDevToolsModelNode::Roles::RoleSort ) );
   setModel( mProxyModel );
 
   connect( mProxyModel, &QAbstractItemModel::rowsInserted, this, [this]( const QModelIndex &parent, int first, int last ) {
@@ -168,7 +168,7 @@ QgsDatabaseQueryLoggerPanelWidget::QgsDatabaseQueryLoggerPanelWidget( QgsAppQuer
   setupUi( this );
 
   mTreeView = new QgsDatabaseQueryLoggerTreeView( mLogger );
-  mTreeView->setItemDelegateForColumn( 1, new QueryCostDelegate( QgsDevToolsModelNode::RoleElapsedTime, QgsDevToolsModelNode::RoleMaximumTime, mTreeView ) );
+  mTreeView->setItemDelegateForColumn( 1, new QueryCostDelegate( static_cast<int>( QgsDevToolsModelNode::Roles::RoleElapsedTime ), static_cast<int>( QgsDevToolsModelNode::Roles::RoleMaximumTime ), mTreeView ) );
   mTreeView->setSortingEnabled( true );
   mTreeView->sortByColumn( 0, Qt::SortOrder::AscendingOrder );
 
diff --git a/src/app/qgisapp.cpp b/src/app/qgisapp.cpp
index e27eee4b6f1..41c86478072 100644
--- a/src/app/qgisapp.cpp
+++ b/src/app/qgisapp.cpp
@@ -450,10 +450,10 @@
 #include "qgsbearingnumericformat.h"
 #include "qgsprojectdisplaysettings.h"
 #include "qgstemporalcontrollerdockwidget.h"
-#include "qgsnetworklogger.h"
 #include "qgsuserprofilemanager.h"
 #include "qgsuserprofile.h"
-#include "qgsnetworkloggerwidgetfactory.h"
+#include "devtools/networklogger/qgsnetworklogger.h"
+#include "devtools/networklogger/qgsnetworkloggerwidgetfactory.h"
 #include "devtools/querylogger/qgsappquerylogger.h"
 #include "devtools/querylogger/qgsqueryloggerwidgetfactory.h"
 #include "devtools/profiler/qgsprofilerwidgetfactory.h"
diff --git a/src/gui/CMakeLists.txt b/src/gui/CMakeLists.txt
index da9ec248cc2..a485aa089bb 100644
--- a/src/gui/CMakeLists.txt
+++ b/src/gui/CMakeLists.txt
@@ -165,8 +165,13 @@ set(QGIS_GUI_SRCS
   codeeditors/qgscodeeditorexpression.cpp
   codeeditors/qgscodeeditorwidget.cpp
 
+  devtools/qgsdevtoolsmodelnode.cpp
   devtools/qgsdevtoolwidget.cpp
   devtools/qgsdevtoolwidgetfactory.cpp
+  devtools/networklogger/qgsnetworklogger.cpp
+  devtools/networklogger/qgsnetworkloggernode.cpp
+  devtools/networklogger/qgsnetworkloggerpanelwidget.cpp
+  devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp
 
   editorwidgets/core/qgseditorconfigwidget.cpp
   editorwidgets/core/qgseditorwidgetautoconf.cpp
@@ -1164,8 +1169,13 @@ set(QGIS_GUI_HDRS
   codeeditors/qgscodeeditorsql.h
   codeeditors/qgscodeeditorwidget.h
 
+  devtools/qgsdevtoolsmodelnode.h
   devtools/qgsdevtoolwidget.h
   devtools/qgsdevtoolwidgetfactory.h
+  devtools/networklogger/qgsnetworklogger.h
+  devtools/networklogger/qgsnetworkloggernode.h
+  devtools/networklogger/qgsnetworkloggerpanelwidget.h
+  devtools/networklogger/qgsnetworkloggerwidgetfactory.h
 
   editorwidgets/core/qgseditorconfigwidget.h
   editorwidgets/core/qgseditorwidgetautoconf.h
@@ -1889,6 +1899,7 @@ target_include_directories(qgis_gui PUBLIC
   ${CMAKE_SOURCE_DIR}/src/gui/callouts
   ${CMAKE_SOURCE_DIR}/src/gui/codeeditors
   ${CMAKE_SOURCE_DIR}/src/gui/devtools
+  ${CMAKE_SOURCE_DIR}/src/gui/devtools/networklogger
   ${CMAKE_SOURCE_DIR}/src/gui/editorwidgets
   ${CMAKE_SOURCE_DIR}/src/gui/editorwidgets/core
   ${CMAKE_SOURCE_DIR}/src/gui/effects
diff --git a/src/app/devtools/networklogger/qgsnetworklogger.cpp b/src/gui/devtools/networklogger/qgsnetworklogger.cpp
similarity index 98%
rename from src/app/devtools/networklogger/qgsnetworklogger.cpp
rename to src/gui/devtools/networklogger/qgsnetworklogger.cpp
index 7d0775584df..2daa526f270 100644
--- a/src/app/devtools/networklogger/qgsnetworklogger.cpp
+++ b/src/gui/devtools/networklogger/qgsnetworklogger.cpp
@@ -215,7 +215,7 @@ void QgsNetworkLogger::removeRequestRows( const QList<int> &rows )
 
   for ( int row : std::as_const( res ) )
   {
-    int popId = data( index( row, 0, QModelIndex() ), QgsDevToolsModelNode::RoleId ).toInt();
+    int popId = data( index( row, 0, QModelIndex() ), static_cast<int>( QgsDevToolsModelNode::Roles::RoleId ) ).toInt();
     mRequestGroups.remove( popId );
 
     beginRemoveRows( QModelIndex(), row, row );
diff --git a/src/app/devtools/networklogger/qgsnetworklogger.h b/src/gui/devtools/networklogger/qgsnetworklogger.h
similarity index 96%
rename from src/app/devtools/networklogger/qgsnetworklogger.h
rename to src/gui/devtools/networklogger/qgsnetworklogger.h
index 9ca34d523b9..0493ec3c220 100644
--- a/src/app/devtools/networklogger/qgsnetworklogger.h
+++ b/src/gui/devtools/networklogger/qgsnetworklogger.h
@@ -15,9 +15,13 @@
 #ifndef QGSNETWORKLOGGER_H
 #define QGSNETWORKLOGGER_H
 
+#define SIP_NO_FILE
+
 #include <QAbstractItemModel>
 #include <QSortFilterProxyModel>
 #include <QElapsedTimer>
+
+#include "qgis_gui.h"
 #include "qgsnetworkaccessmanager.h"
 
 class QgsDevToolsModelNode;
@@ -26,14 +30,14 @@ class QgsNetworkLoggerRootNode;
 class QAction;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLogger
  * \brief Logs network requests from a QgsNetworkAccessManager, converting them
  * to a QAbstractItemModel representing the request and response details.
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLogger : public QAbstractItemModel
+class GUI_EXPORT QgsNetworkLogger : public QAbstractItemModel
 {
     Q_OBJECT
 
@@ -120,14 +124,14 @@ class QgsNetworkLogger : public QAbstractItemModel
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerProxyModel
  * \brief A proxy model for filtering QgsNetworkLogger models by url string subsets
  * or request status.
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerProxyModel : public QSortFilterProxyModel
+class GUI_EXPORT QgsNetworkLoggerProxyModel : public QSortFilterProxyModel
 {
     Q_OBJECT
   public:
diff --git a/src/app/devtools/networklogger/qgsnetworkloggernode.cpp b/src/gui/devtools/networklogger/qgsnetworkloggernode.cpp
similarity index 99%
rename from src/app/devtools/networklogger/qgsnetworkloggernode.cpp
rename to src/gui/devtools/networklogger/qgsnetworkloggernode.cpp
index 480b48fa104..656152de1a5 100644
--- a/src/app/devtools/networklogger/qgsnetworkloggernode.cpp
+++ b/src/gui/devtools/networklogger/qgsnetworkloggernode.cpp
@@ -101,10 +101,10 @@ QVariant QgsNetworkLoggerRequestGroup::data( int role ) const
         .arg( mUrl.url(), statusToString( mStatus ), QString::number( mHttpStatus ), mContentType, bytes, mStatus == Status::Pending ? QString::number( mTimer.elapsed() / 1000 ) : QString::number( mTotalTime ), QString::number( mReplies ) );
     }
 
-    case RoleStatus:
+    case static_cast<int>( Roles::RoleStatus ):
       return static_cast<int>( mStatus );
 
-    case RoleId:
+    case static_cast<int>( Roles::RoleId ):
       return mRequestId;
 
     case Qt::ForegroundRole:
diff --git a/src/app/devtools/networklogger/qgsnetworkloggernode.h b/src/gui/devtools/networklogger/qgsnetworkloggernode.h
similarity index 91%
rename from src/app/devtools/networklogger/qgsnetworkloggernode.h
rename to src/gui/devtools/networklogger/qgsnetworkloggernode.h
index f4200063fe0..6332ec13fea 100644
--- a/src/app/devtools/networklogger/qgsnetworkloggernode.h
+++ b/src/gui/devtools/networklogger/qgsnetworkloggernode.h
@@ -15,8 +15,11 @@
 #ifndef QGSNETWORKLOGGERNODE_H
 #define QGSNETWORKLOGGERNODE_H
 
+#define SIP_NO_FILE
+
+#include "qgis_gui.h"
 #include "qgsnetworkaccessmanager.h"
-#include "devtools/qgsdevtoolsmodelnode.h"
+#include "qgsdevtoolsmodelnode.h"
 #include <QElapsedTimer>
 #include <QVariant>
 #include <QColor>
@@ -27,13 +30,13 @@
 class QAction;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerRootNode
  * \brief Root node for the network logger model.
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerRootNode final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerRootNode final : public QgsDevToolsModelGroup
 {
   public:
     QgsNetworkLoggerRootNode();
@@ -52,7 +55,7 @@ class QgsNetworkLoggerReplyGroup;
 class QgsNetworkLoggerSslErrorGroup;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerRequestGroup
  * \brief Parent group for all network requests, showing the request id, type, url,
  * and containing child groups with detailed request and response information.
@@ -77,7 +80,7 @@ class QgsNetworkLoggerSslErrorGroup;
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerRequestGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerRequestGroup final : public QgsDevToolsModelGroup
 {
   public:
     //! Request statu
@@ -183,7 +186,7 @@ class QgsNetworkLoggerRequestHeadersGroup;
 class QgsNetworkLoggerPostContentGroup;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerRequestGroup
  * \brief Parent group for all network request details, showing the request parameters
  * and header information.
@@ -207,7 +210,7 @@ class QgsNetworkLoggerPostContentGroup;
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerRequestDetailsGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerRequestDetailsGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -225,7 +228,7 @@ class QgsNetworkLoggerRequestDetailsGroup final : public QgsDevToolsModelGroup
 
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerRequestHeadersGroup
  * \brief Parent group for all network request header information.
  *
@@ -237,7 +240,7 @@ class QgsNetworkLoggerRequestDetailsGroup final : public QgsDevToolsModelGroup
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerRequestHeadersGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerRequestHeadersGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -249,7 +252,7 @@ class QgsNetworkLoggerRequestHeadersGroup final : public QgsDevToolsModelGroup
 
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerRequestQueryGroup
  * \brief Parent group for all network request query information.
  *
@@ -261,7 +264,7 @@ class QgsNetworkLoggerRequestHeadersGroup final : public QgsDevToolsModelGroup
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerRequestQueryGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerRequestQueryGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -272,7 +275,7 @@ class QgsNetworkLoggerRequestQueryGroup final : public QgsDevToolsModelGroup
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerPostContentGroup
  * \brief Parent group for all request post data, showing POST data.
  *
@@ -283,7 +286,7 @@ class QgsNetworkLoggerRequestQueryGroup final : public QgsDevToolsModelGroup
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerPostContentGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerPostContentGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -296,7 +299,7 @@ class QgsNetworkLoggerPostContentGroup final : public QgsDevToolsModelGroup
 class QgsNetworkLoggerReplyHeadersGroup;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerReplyGroup
  * \brief Parent group for all network replies, showing the reply details.
  *
@@ -311,7 +314,7 @@ class QgsNetworkLoggerReplyHeadersGroup;
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerReplyGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerReplyGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -326,7 +329,7 @@ class QgsNetworkLoggerReplyGroup final : public QgsDevToolsModelGroup
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerReplyHeadersGroup
  * \brief Parent group for network reply headers, showing the reply header details.
  *
@@ -339,7 +342,7 @@ class QgsNetworkLoggerReplyGroup final : public QgsDevToolsModelGroup
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerReplyHeadersGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerReplyHeadersGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
@@ -350,7 +353,7 @@ class QgsNetworkLoggerReplyHeadersGroup final : public QgsDevToolsModelGroup
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerSslErrorNode
  * \brief Parent group for SSQL errors, showing the error details.
  *
@@ -363,7 +366,7 @@ class QgsNetworkLoggerReplyHeadersGroup final : public QgsDevToolsModelGroup
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerSslErrorGroup final : public QgsDevToolsModelGroup
+class GUI_EXPORT QgsNetworkLoggerSslErrorGroup final : public QgsDevToolsModelGroup
 {
   public:
     /**
diff --git a/src/app/devtools/networklogger/qgsnetworkloggerpanelwidget.cpp b/src/gui/devtools/networklogger/qgsnetworkloggerpanelwidget.cpp
similarity index 100%
rename from src/app/devtools/networklogger/qgsnetworkloggerpanelwidget.cpp
rename to src/gui/devtools/networklogger/qgsnetworkloggerpanelwidget.cpp
diff --git a/src/app/devtools/networklogger/qgsnetworkloggerpanelwidget.h b/src/gui/devtools/networklogger/qgsnetworkloggerpanelwidget.h
similarity index 91%
rename from src/app/devtools/networklogger/qgsnetworkloggerpanelwidget.h
rename to src/gui/devtools/networklogger/qgsnetworkloggerpanelwidget.h
index e152c2c2e61..14b305d60b9 100644
--- a/src/app/devtools/networklogger/qgsnetworkloggerpanelwidget.h
+++ b/src/gui/devtools/networklogger/qgsnetworkloggerpanelwidget.h
@@ -15,6 +15,9 @@
 #ifndef QGSNETWORKLOGGERPANELWIDGET_H
 #define QGSNETWORKLOGGERPANELWIDGET_H
 
+#define SIP_NO_FILE
+
+#include "qgis_gui.h"
 #include "qgsdevtoolwidget.h"
 #include "ui_qgsnetworkloggerpanelbase.h"
 #include <QTreeView>
@@ -23,13 +26,13 @@ class QgsNetworkLogger;
 class QgsNetworkLoggerProxyModel;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerTreeView
  * \brief A custom QTreeView subclass for showing logged network requests.
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerTreeView : public QTreeView
+class GUI_EXPORT QgsNetworkLoggerTreeView : public QTreeView
 {
     Q_OBJECT
   public:
@@ -74,13 +77,13 @@ class QgsNetworkLoggerTreeView : public QTreeView
 
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsNetworkLoggerPanelWidget
  * \brief A panel widget showing logged network requests.
  *
  * \since QGIS 3.14
  */
-class QgsNetworkLoggerPanelWidget : public QgsDevToolWidget, private Ui::QgsNetworkLoggerPanelBase
+class GUI_EXPORT QgsNetworkLoggerPanelWidget : public QgsDevToolWidget, private Ui::QgsNetworkLoggerPanelBase
 {
     Q_OBJECT
 
diff --git a/src/app/devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp b/src/gui/devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp
similarity index 100%
rename from src/app/devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp
rename to src/gui/devtools/networklogger/qgsnetworkloggerwidgetfactory.cpp
diff --git a/src/app/devtools/networklogger/qgsnetworkloggerwidgetfactory.h b/src/gui/devtools/networklogger/qgsnetworkloggerwidgetfactory.h
similarity index 71%
rename from src/app/devtools/networklogger/qgsnetworkloggerwidgetfactory.h
rename to src/gui/devtools/networklogger/qgsnetworkloggerwidgetfactory.h
index fee42613af6..9693658c5f0 100644
--- a/src/app/devtools/networklogger/qgsnetworkloggerwidgetfactory.h
+++ b/src/gui/devtools/networklogger/qgsnetworkloggerwidgetfactory.h
@@ -15,14 +15,32 @@
 #ifndef QGSNETWORKLOGGERWIDGETFACTORY_H
 #define QGSNETWORKLOGGERWIDGETFACTORY_H
 
+#define SIP_NO_FILE
+
+#include "qgis_gui.h"
 #include "qgsdevtoolwidgetfactory.h"
 
 class QgsNetworkLogger;
 
-class QgsNetworkLoggerWidgetFactory : public QgsDevToolWidgetFactory
+/**
+ * \ingroup gui
+ * \class QgsNetworkLoggerWidgetFactory
+ * \brief Factory class for creating network logger debugging page.
+ * \since QGIS 4.0
+ */
+class GUI_EXPORT QgsNetworkLoggerWidgetFactory : public QgsDevToolWidgetFactory
 {
   public:
+    /**
+     * Constructor for a QgsNetworkLoggerWidgetFactory.
+     */
     QgsNetworkLoggerWidgetFactory( QgsNetworkLogger *logger );
+
+    /**
+     * Factory function to create the widget on demand as needed by the dock.
+     *
+     * The \a parent argument gives the correct parent for the newly created widget.
+     */
     QgsDevToolWidget *createWidget( QWidget *parent = nullptr ) const override;
 
   private:
diff --git a/src/app/devtools/qgsdevtoolsmodelnode.cpp b/src/gui/devtools/qgsdevtoolsmodelnode.cpp
similarity index 100%
rename from src/app/devtools/qgsdevtoolsmodelnode.cpp
rename to src/gui/devtools/qgsdevtoolsmodelnode.cpp
diff --git a/src/app/devtools/qgsdevtoolsmodelnode.h b/src/gui/devtools/qgsdevtoolsmodelnode.h
similarity index 93%
rename from src/app/devtools/qgsdevtoolsmodelnode.h
rename to src/gui/devtools/qgsdevtoolsmodelnode.h
index 7a3396e6d0f..e5bfcae60e3 100644
--- a/src/app/devtools/qgsdevtoolsmodelnode.h
+++ b/src/gui/devtools/qgsdevtoolsmodelnode.h
@@ -15,6 +15,9 @@
 #ifndef QGSDEVTOOLSMODELNODE_H
 #define QGSDEVTOOLSMODELNODE_H
 
+#define SIP_NO_FILE
+
+#include "qgis_gui.h"
 #include <QElapsedTimer>
 #include <QVariant>
 #include <QColor>
@@ -26,15 +29,16 @@ class QAction;
 class QgsDevToolsModelGroup;
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsDevToolsModelNode
  * \brief Base class for nodes in a dev tools model.
+ * \since QGIS 4.0
  */
-class QgsDevToolsModelNode
+class GUI_EXPORT QgsDevToolsModelNode
 {
   public:
     //! Custom node data roles
-    enum Roles
+    enum class Roles
     {
       RoleStatus = Qt::UserRole + 1, //!< Request status role
       RoleId,                        //!< Request ID role
@@ -83,11 +87,12 @@ class QgsDevToolsModelNode
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsDevToolsModelGroup
  * \brief Base class for dev tools model "group" nodes, which contain children of their own.
+ * \since QGIS 4.0
  */
-class QgsDevToolsModelGroup : public QgsDevToolsModelNode
+class GUI_EXPORT QgsDevToolsModelGroup : public QgsDevToolsModelNode
 {
   public:
     /**
@@ -137,11 +142,12 @@ class QgsDevToolsModelGroup : public QgsDevToolsModelNode
 };
 
 /**
- * \ingroup app
+ * \ingroup gui
  * \class QgsDevToolsModelValueNode
  * \brief A "key: value" style node for a dev tools model.
+ * \since QGIS 4.0
  */
-class QgsDevToolsModelValueNode : public QgsDevToolsModelNode
+class GUI_EXPORT QgsDevToolsModelValueNode : public QgsDevToolsModelNode
 {
   public:
     /**
-- 
2.51.0


From 582121433398e03b2408951017c682d2ea402509 Mon Sep 17 00:00:00 2001
From: Damiano Lombardi <damiano@opengis.ch>
Date: Mon, 22 Sep 2025 08:25:03 +0200
Subject: [PATCH 2/3] Explicitly forbid copy for QgsDevToolsModelGroup

---
 src/gui/devtools/qgsdevtoolsmodelnode.cpp | 4 ++++
 src/gui/devtools/qgsdevtoolsmodelnode.h   | 9 +++++++++
 2 files changed, 13 insertions(+)

diff --git a/src/gui/devtools/qgsdevtoolsmodelnode.cpp b/src/gui/devtools/qgsdevtoolsmodelnode.cpp
index fff4c4ef080..544816e532f 100644
--- a/src/gui/devtools/qgsdevtoolsmodelnode.cpp
+++ b/src/gui/devtools/qgsdevtoolsmodelnode.cpp
@@ -52,6 +52,10 @@ QgsDevToolsModelGroup::QgsDevToolsModelGroup( const QString &title )
 {
 }
 
+QgsDevToolsModelGroup::~QgsDevToolsModelGroup() = default;
+QgsDevToolsModelGroup::QgsDevToolsModelGroup( QgsDevToolsModelGroup &&other ) noexcept = default;
+QgsDevToolsModelGroup &QgsDevToolsModelGroup::operator=( QgsDevToolsModelGroup &&other ) noexcept = default;
+
 QgsDevToolsModelNode *QgsDevToolsModelGroup::addChild( std::unique_ptr<QgsDevToolsModelNode> child )
 {
   if ( !child )
diff --git a/src/gui/devtools/qgsdevtoolsmodelnode.h b/src/gui/devtools/qgsdevtoolsmodelnode.h
index e5bfcae60e3..a153c68c967 100644
--- a/src/gui/devtools/qgsdevtoolsmodelnode.h
+++ b/src/gui/devtools/qgsdevtoolsmodelnode.h
@@ -94,6 +94,11 @@ class GUI_EXPORT QgsDevToolsModelNode
  */
 class GUI_EXPORT QgsDevToolsModelGroup : public QgsDevToolsModelNode
 {
+  public:
+    ~QgsDevToolsModelGroup() override;
+    QgsDevToolsModelGroup( QgsDevToolsModelGroup &&other ) noexcept;
+    QgsDevToolsModelGroup &operator=( QgsDevToolsModelGroup &&other ) noexcept;
+
   public:
     /**
      * Adds a \a child node to this node.
@@ -138,6 +143,10 @@ class GUI_EXPORT QgsDevToolsModelGroup : public QgsDevToolsModelNode
     std::deque<std::unique_ptr<QgsDevToolsModelNode>> mChildren;
 
   private:
+    // Prevent copying
+    QgsDevToolsModelGroup( const QgsDevToolsModelGroup & ) = delete;
+    QgsDevToolsModelGroup &operator=( const QgsDevToolsModelGroup & ) = delete;
+
     QString mGroupTitle;
 };
 
-- 
2.51.0


From 681d58dd8c69a04557d86a3faa18d4be5eb05e2e Mon Sep 17 00:00:00 2001
From: Damiano Lombardi <damiano@opengis.ch>
Date: Tue, 23 Sep 2025 08:49:35 +0200
Subject: [PATCH 3/3] Missing docstrings

---
 src/gui/devtools/qgsdevtoolsmodelnode.cpp |  2 --
 src/gui/devtools/qgsdevtoolsmodelnode.h   | 12 ++++++++++--
 2 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/src/gui/devtools/qgsdevtoolsmodelnode.cpp b/src/gui/devtools/qgsdevtoolsmodelnode.cpp
index 544816e532f..04baae0ef06 100644
--- a/src/gui/devtools/qgsdevtoolsmodelnode.cpp
+++ b/src/gui/devtools/qgsdevtoolsmodelnode.cpp
@@ -53,8 +53,6 @@ QgsDevToolsModelGroup::QgsDevToolsModelGroup( const QString &title )
 }
 
 QgsDevToolsModelGroup::~QgsDevToolsModelGroup() = default;
-QgsDevToolsModelGroup::QgsDevToolsModelGroup( QgsDevToolsModelGroup &&other ) noexcept = default;
-QgsDevToolsModelGroup &QgsDevToolsModelGroup::operator=( QgsDevToolsModelGroup &&other ) noexcept = default;
 
 QgsDevToolsModelNode *QgsDevToolsModelGroup::addChild( std::unique_ptr<QgsDevToolsModelNode> child )
 {
diff --git a/src/gui/devtools/qgsdevtoolsmodelnode.h b/src/gui/devtools/qgsdevtoolsmodelnode.h
index a153c68c967..83fa4a57e83 100644
--- a/src/gui/devtools/qgsdevtoolsmodelnode.h
+++ b/src/gui/devtools/qgsdevtoolsmodelnode.h
@@ -96,8 +96,16 @@ class GUI_EXPORT QgsDevToolsModelGroup : public QgsDevToolsModelNode
 {
   public:
     ~QgsDevToolsModelGroup() override;
-    QgsDevToolsModelGroup( QgsDevToolsModelGroup &&other ) noexcept;
-    QgsDevToolsModelGroup &operator=( QgsDevToolsModelGroup &&other ) noexcept;
+
+    /**
+     * Constructor for a QgsDevToolsModelGroup. Copy constructor is disabled
+     */
+    QgsDevToolsModelGroup( QgsDevToolsModelGroup &&other ) noexcept = default;
+
+    /**
+     * Assignement operator for QgsDevToolsModelGroup. Copy assignement is disabled
+     */
+    QgsDevToolsModelGroup &operator=( QgsDevToolsModelGroup &&other ) noexcept = default;
 
   public:
     /**
-- 
2.51.0

